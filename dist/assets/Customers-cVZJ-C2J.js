import{r as c,l as i,_ as t,j as o,L as x,T as g,A as b}from"./index-YJK9wbQ5.js";const k=[{Header:"S.NO",accessor:"no"},{Header:"USERNAME",accessor:"username"},{Header:"EMAIL",accessor:"email"},{Header:"PHONE",accessor:"phone"},{Header:o.jsx("div",{className:"flex justify-center ",children:"All Orders"}),accessor:"orderDetails"},{Header:"BLOCK",accessor:"block"}],E=()=>{const[a,l]=c.useState([]),[d,u]=c.useState([]);c.useEffect(()=>{i.get("/admin/customers").then(s=>{s.data.success?l(s.data.data):t.error("Error while loading categories")}).catch(s=>{t.error("Error while loading categories"),console.log(s)})},[]),console.log(a),c.useEffect(()=>{const s=a.map((e,r)=>({no:r+1,username:e.username,email:e.email,phone:e.phone,orderDetails:o.jsx(x,{className:"flex justify-center",to:`/admin/customer/${e._id}/products`,children:"View"}),block:o.jsx("button",{className:`px-2 py-1  ${e.isBlocked?"bg-red-500 text-white  ":"bg-green-500 text-white"}`,onClick:()=>m(e._id,e.isBlocked),children:e.isBlocked?"Unblock":"Block"})}));u(s)},[a]);const m=async(s,e)=>{try{console.log(s);const r=await i.put(`/admin/customers?id=${s}`,{isBlocked:!e});console.log(r);const p=a.map(n=>n._id===s?{...n,isBlocked:!e}:n);l(p),t.success(`Customer ${e?"Unblocked":"Blocked"} successfully`)}catch(r){console.error("Error updating block status:",r),t.error("Error updating block status")}},h=g(k,d,"dashboard-product-box","Products",d.length>6)();return o.jsxs("div",{className:"admin-container",children:[o.jsx(b,{}),o.jsx("main",{children:h})]})};export{E as default};
