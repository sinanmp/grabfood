import{j as e,u as E,r as a,L as R,t as U,v as H,l as d,w as A,_ as f}from"./index-YJK9wbQ5.js";const T=({name:l,imageUrl:c,handler:x})=>{const n=()=>{x(l)};return e.jsx("div",{className:"flex flex-col  items-center gap-3",children:e.jsxs("button",{onClick:n,children:[e.jsx("div",{className:"w-[200px] h-[192px]  rounded-[100%] flex justify-center overflow-hidden shadow-md",children:e.jsx("img",{className:"object-cover cursor-pointer ",src:c,alt:""})}),e.jsx("h3",{className:"font-bold",children:l})]})})},O=({productId:l,price:c,name:x,discountPrice:n,offerInPercentage:w,description:v,imageUrl:k,onAddToCart:m})=>{const{user:h}=E(r=>r.userReducer),p=h._id,[i,N]=a.useState([]),s=async()=>{try{const r=await d.get(`/user/${p}/wishlist`);r.data.success?N(r.data.data):console.error("Failed to fetch user orders:",r.data.error)}catch(r){console.error("Error fetching user orders:",r)}};console.log("data:",i),a.useEffect(()=>{s()},[p]);const g=async()=>{try{const r=h._id;(await d.post("/user/wishlist/add",{userId:r,productId:l})).data.success&&s()}catch(r){console.error(r)}};return e.jsxs("div",{className:"relative m-10 flex w-full max-w-xs  flex-col overflow-hidden rounded-lg border border-gray-100 bg-white shadow-md",children:[e.jsxs(R,{className:"relative mx-3 mt-3 flex h-60 overflow-hidden rounded-xl",to:`/product/${l}`,children:[e.jsx("img",{className:"object-cover",src:k,alt:"product image"}),w&&e.jsxs("span",{className:"absolute top-0 left-0 m-2 rounded-full bg-black px-2 text-center text-sm font-medium text-white",children:[w,"% OFF"]})]}),e.jsx("button",{onClick:g,className:" absolute z-10 top-0 right-0 mt-4 mr-6 rounded-full bg-black px-2 border focus:outline-none",children:e.jsx(U,{icon:H,color:i.some(r=>r.productId===l)?"red":"white"})}),e.jsxs("div",{className:"mt-4 px-5 pb-5",children:[e.jsx("a",{href:"#",children:e.jsx("h5",{className:"text-xl tracking-tight text-slate-900 line-clamp-1 ",children:x})}),e.jsxs("div",{className:"mt-2 mb-2 flex items-center justify-between",children:[n?e.jsxs("p",{children:[e.jsxs("span",{className:"text-3xl font-bold text-slate-900",children:["₹",n]}),e.jsxs("span",{className:"text-sm text-slate-900 line-through",children:["₹",c]})]}):e.jsx("p",{children:e.jsxs("span",{className:"text-3xl font-bold text-slate-900",children:["₹",c]})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{"aria-hidden":"true",className:"h-5 w-5 text-yellow-300",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("svg",{"aria-hidden":"true",className:"h-5 w-5 text-yellow-300",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("svg",{"aria-hidden":"true",className:"h-5 w-5 text-yellow-300",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("svg",{"aria-hidden":"true",className:"h-5 w-5 text-yellow-300",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("svg",{"aria-hidden":"true",className:"h-5 w-5 text-yellow-300",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("span",{className:"mr-2 ml-3 rounded bg-yellow-200 px-2.5 py-0.5 text-xs font-semibold",children:"5.0"})]})]}),e.jsx("div",{className:"px-4 mb-4 overflow-hidden h-10 ",children:e.jsx("p",{className:"text-sm text-slate-900 line-clamp-2",children:v})}),e.jsxs("button",{onClick:m,className:"flex w-full items-center justify-center rounded-md bg-slate-900 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-blue-300",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mr-2 h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),"Add to cart"]})]})]})},L="http://localhost:5000",Q=()=>{const{user:l}=E(t=>t.userReducer),c=l._id,x=A(),n=new URLSearchParams(x.search).get("q"),[w,v]=a.useState([]),[k,m]=a.useState([]),[h,p]=a.useState([]),[i,N]=a.useState(""),[s,g]=a.useState(1),[r,j]=a.useState(1),[$,P]=a.useState(!1),y=a.useRef(null),C=4,[F,S]=a.useState([]),M=async()=>{try{const t=await d.get(`/user/${c}/wishlist`);t.data.success?S(t.data.data):console.error("Failed to fetch user orders:",t.data.error)}catch(t){console.error("Error fetching user orders:",t)}};console.log("data:",F),a.useEffect(()=>{M()},[c]),a.useEffect(()=>{try{d.get("/category/get").then(t=>{t.data.success&&v(t.data.data)})}catch(t){f.error("Error while loading categories"),console.log(t)}},[]),a.useEffect(()=>{n?B(n):I()},[i,s,n]),a.useEffect(()=>{I()},[i,s]),a.useEffect(()=>{function t(o){y.current&&!y.current.contains(o.target)&&P(!1)}return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[y]);const I=()=>{try{d.get(`/product/get?category=${i}&page=${s}&limit=${C}`).then(t=>{t.data.success&&(m(t.data.data),j(t.data.totalPages))})}catch(t){f.error("Error while loading products"),console.log(t)}},_=()=>{try{d.get(`/product/get_best?category=${i}&page=${s}&limit=${C}`).then(t=>{t.data.success&&(m(t.data.data),j(t.data.totalPages))})}catch(t){f.error("Error while loading products"),console.log(t)}},B=t=>{try{d.get(`/product/search?q=${t}&page=${s}&limit=${C}`).then(o=>{o.data.success&&(m(o.data.data),j(o.data.totalPages))})}catch(o){f.error("Error while searching products"),console.log(o)}},z=t=>{if(d.post(`/cart/add/${c}`,{product:t,quantity:1}).then(u=>console.log("Product added to cart:",u.data)).catch(u=>console.error("Error adding to cart:",u)),h.find(u=>u.productId===t._id)){const u=h.map(b=>b.productId===t._id?{...b,quantity:b.quantity+1}:b);p(u)}else p([...h,{productId:t._id,quantity:1,name:t.productName,price:t.price,imageUrl:`${L}/${t.productImage[0].replace(/ /g,"%20")}`}]);f.success(`${t.productName} added to cart!`)},q=t=>{N(t),g(1)};return e.jsxs("div",{className:"bg-[#e5d9ca] h-full ",children:[e.jsxs("div",{className:"container custom-height flex flex-col justify-center items-center mx-auto  ",children:[e.jsx("div",{className:"flex gap-4",children:w.map(t=>e.jsx("div",{children:t.categoryImage&&t.categoryImage[0]&&e.jsx(e.Fragment,{children:e.jsx(T,{name:t.category,imageUrl:`${L}/${t.categoryImage[0].replace(/ /g,"%20")}`,handler:()=>q(t.category)})})},t._id))}),e.jsx("div",{className:"w-full border-t mt-5 border-[#9a9b9e] flex justify-between ",children:e.jsxs("div",{className:"relative inline-block text-left",ref:y,children:[e.jsx("div",{children:e.jsxs("button",{onClick:()=>P(!$),type:"button",className:"inline-flex w-full justify-center gap-x-1.5 mt-2  px-3 py-2 text-sm font-semibold text-gray-900  ",id:"menu-button","aria-expanded":"true","aria-haspopup":"true",children:["Sort",e.jsx("svg",{className:"-mr-1 h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"})})]})}),$&&e.jsx("div",{className:"absolute left-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",children:e.jsx("div",{className:"py-1",role:"none",children:e.jsx("button",{onClick:()=>{_()},className:"text-gray-700 block px-4 py-2 text-sm",role:"menuitem",id:"menu-item-0",children:"Best selling product"})})})]})}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:k.map(t=>e.jsx("div",{children:t.productImage&&t.productImage[0]&&e.jsx(e.Fragment,{children:e.jsx(O,{productId:t._id,price:t.price,description:t.Description,name:t.productName,discountPrice:t==null?void 0:t.discountPrice,offerInPercentage:t.offerInPercentage,imageUrl:`${L}/${t.productImage[0].replace(/ /g,"%20")}`,onAddToCart:()=>z(t)})})},t._id))})]}),e.jsx("div",{className:"flex justify-center pt-2 pb-10 ",children:e.jsx("nav",{"aria-label":"Page navigation example",children:e.jsxs("ul",{className:"inline-flex -space-x-px text-base h-10",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>g(t=>Math.max(t-1,1)),disabled:s===1,className:`flex items-center justify-center px-4 h-10 leading-tight text-gray-500 bg-white border border-e-0 border-gray-300 rounded-l-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white ${s===1?"cursor-not-allowed":"cursor-pointer"}`,children:"Previous"})}),[...Array(r)].map((t,o)=>e.jsx("li",{children:e.jsx("button",{onClick:()=>g(o+1),className:`flex items-center justify-center px-4 h-10 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white ${s===o+1?"text-blue-600 bg-blue-50 hover:bg-blue-100 hover:text-blue-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white":""}`,children:o+1})},o)),e.jsx("li",{children:e.jsx("button",{onClick:()=>g(t=>Math.min(t+1,r)),disabled:s===r,className:`flex items-center justify-center px-4 h-10 leading-tight text-gray-500 bg-white border border-gray-300 rounded-r-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white ${s===r?"cursor-not-allowed":"cursor-pointer"}`,children:"Next"})})]})})})]})};export{Q as default};
