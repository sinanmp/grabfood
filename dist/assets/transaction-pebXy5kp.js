import{r,l,_ as a,j as o,L as f,T as b,A as k}from"./index-YJK9wbQ5.js";const w=[{Header:"S.no",accessor:"no"},{Header:"Product",accessor:"product"},{Header:"Amount",accessor:"amount"},{Header:"Quantity",accessor:"quantity"},{Header:"Status",accessor:"status"},{Header:o.jsx("div",{className:"flex justify-center ",children:"All Orders"}),accessor:"orderDetails"}],E=()=>{const[c,d]=r.useState([]),[i,g]=r.useState([]),[u,h]=r.useState([]);r.useEffect(()=>{l.get("/orders/products").then(s=>{s.data.success?g(s.data.allOrders):a.error("Error while loading categories")}).catch(s=>{a.error("Error while loading categories"),console.log(s)})},[]),console.log(i),r.useEffect(()=>{l.get("/admin/customers").then(s=>{s.data.success?d(s.data.data):a.error("Error while loading categories")}).catch(s=>{a.error("Error while loading categories"),console.log(s)})},[]),console.log(c),r.useEffect(()=>{const s=i.map((e,t)=>({no:t+1,product:e._id.productName,amount:e.totalPrice,quantity:e.totalQuantity,status:o.jsxs("div",{children:[" ",e._id.userName,"  ",e.countProcessing,"   ",e.overallStatus,"    "]}),orderDetails:o.jsx(f,{className:"flex justify-center",to:`/admin/customer/${e._id}/products`,children:"View"}),block:o.jsx("button",{className:`px-2 py-1  ${e.isBlocked?"bg-red-500 text-white  ":"bg-green-500 text-white"}`,onClick:()=>p(e._id,e.isBlocked),children:e.isBlocked?"Unblock":"Block"})}));h(s)},[c]);const p=async(s,e)=>{try{console.log(s);const t=await l.put(`/admin/customers?id=${s}`,{isBlocked:!e});console.log(t);const m=c.map(n=>n._id===s?{...n,isBlocked:!e}:n);d(m),a.success(`Customer ${e?"Unblocked":"Blocked"} successfully`)}catch(t){console.error("Error updating block status:",t),a.error("Error updating block status")}},x=b(w,u,"dashboard-product-box","Transaction",u.length>6)();return o.jsxs("div",{className:"admin-container",children:[o.jsx(k,{}),o.jsx("main",{children:x})]})};export{E as default};
